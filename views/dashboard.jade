doctype html
html(lang='en', ng-app='dashboard', ng-init='username = "#{username}"')
head
  meta(charset="utf-8", http-equiv="X-UA-Compatible",content="IE=edge")
  meta(name="viewport", content="width=device-width, initial-scale=1")
  title Paper quiz killer
  link(href="/stylesheets/bootstrap.min.css",rel="stylesheet")
  link(href="/stylesheets/landing-page.css", rel="stylesheet")
  link(href="/font-awesome/css/font-awesome.min.css", rel="stylesheet", type="text/css")
  link(href="/stylesheets/tryit.css", rel="stylesheet")
  style.
    #topSpacing {height: 30px;}
    .headerRow{margin-bottom: 10px; margin-top: 10px;}
    .chart_div {
      width: 400px; 
      height: 200px;
      margin: 30px;
      display: none;
    }
body(ng-controller="MainController")
  
  h1 Dashboard
  img(id="ornament", src="/images/ornament.png")
  #topSpacing
  .row.headerRow
    h2 Your quizzes
  .row.headerRow
    button(class='btn btn-default col-sm-2', ng-click='createNewQuiz()') Create new
  .row
    each quiz, quizIndex in quizData
      .panel.panel-default
        .panel-heading #{quiz.title}
        .panel-body
          button(class='btn btn-default col-sm-2' ng-click='distribute("#{quiz._id}")') Send to class
        ul.list-group
          each instance, instanceIndex in quiz.instances
            li.list-group-element
              .row
                .col-sm-3
                  a(href='' ng-click='viewQuizInstanceDetails(#{quizIndex}, #{instance.instanceIndex})') #{instance.creationDate}
                .col-sm-2 You sent #{instance.instanceCount}, #{instance.submittedCount} have been submitted
                .col-sm-2 
                  a(href='' ng-click='showReportSummary("#{quiz._id}", #{quizIndex}, #{instance.instanceIndex})') Show/hide details
              .row
                div(id="chart_div#{quizIndex}_#{instance.instanceIndex}" class="chart_div")
  button(ng-click='drawChart') Draw
  script(type="text/javascript", src="/libs/jquery.js")
  script(type="text/javascript", src="/libs/bootstrap.min.js")
  script(type="text/javascript", src="/libs/angular.js")
  script(type='text/javascript'  src='https://www.google.com/jsapi')
  script(type='text/javascript', src='/javascripts/dashboard.js')
  script(type="text/javascript").

    // Load the Visualization API and the piechart package.
    google.load('visualization', '1.0', {'packages':['bar']});

    // Set a callback to run when the Google Visualization API is loaded.
    google.setOnLoadCallback(drawChart);

    // Callback that creates and populates a data table,
    // instantiates the pie chart, passes in the data and
    // draws it.
    function drawChart() {

      // Create the data table.
      var data = google.visualization.arrayToDataTable([
        ['Year', 'Sales', 'Expenses', 'Profit'],
        ['2014', 1000, 400, 200],
        ['2015', 1170, 460, 250],
        ['2016', 660, 1120, 300],
        ['2017', 1030, 540, 350]
      ]);


      // Set chart options
      var options = {
        chart: {
          'title':'',
          'width':400,
          'height':300 
          },
        bar: 'vertical'
        }

      // Instantiate and draw our chart, passing in some options.
      //var chart = new google.charts.Bar(document.getElementById('chart_div0_0'));
      //chart.draw(data, options);
    }
